generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TipoRol {
  Administrador
  Registrador
}

model Usuario {
  id            String   @id @default(uuid())
  nombreUsuario String   @unique @db.VarChar(20)
  email         String   @unique
  fechaRegistro DateTime @default(now())
  contrasena    String   @db.VarChar(400)
  habilitado    Boolean  @default(true)
  rol           TipoRol  @default(Registrador)
}

enum TipoNoticia {
  Normal
  Publicacion
  Multimedia
  Url
}

model Categoria {
  id              String      @id @default(uuid())
  nombre          String      @default("Sin categoría") @unique
  noticias        Noticia[]
}

model Noticia {
  id              String      @id @default(uuid())
  fechaRegistro   DateTime    @default(now())
  habilitado      Boolean     @default(true)
  duracion        Int         @default(5)
  titulo          String      @default("Titulo por defecto") @db.VarChar(50)  //esto puede ser cambiado, consultar
  contenido       String?     @db.VarChar(1024) //esto puede ser cambiado, consultar
  tipo            TipoNoticia @default(Normal)
  multimedia      String?     @db.Text // Para almacenar imágenes en base64
  multimedia_url  String?     @db.Text // En caso de ingresar url
  extension       String?
  categoria       Categoria   @relation(fields: [categoriaId], references: [id])
  categoriaId     String      @default("Sin categoría")
}




// WINDOWS - VS CODE
// Para crear la migracion: npx prisma migrate dev --name {nombre-migracion}
// Para aplicar cambios: npx prisma db push